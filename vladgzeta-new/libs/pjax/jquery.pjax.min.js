!function(t){function e(e,r,n){return n=g(r,n),this.on("click.pjax",e,function(e){var r=n;r.container||(r=t.extend({},n),r.container=t(this).attr("data-pjax")),a(e,r)})}function a(e,a,r){r=g(a,r);var i=e.currentTarget,o=t(i);if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.href.indexOf("#")>-1&&x(i)==x(location)||e.isDefaultPrevented())){var s={url:i.href,container:o.attr("data-pjax"),target:i},u=t.extend({},s,r),c=t.Event("pjax:click");o.trigger(c,[u]),c.isDefaultPrevented()||(n(u),e.preventDefault(),o.trigger("pjax:clicked",[u]))}}function r(e,a,r){r=g(a,r);var i=e.currentTarget,o=t(i);if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:(o.attr("method")||"GET").toUpperCase(),url:o.attr("action"),container:o.attr("data-pjax"),target:i};if("GET"!==s.type&&void 0!==window.FormData)s.data=new FormData(i),s.processData=!1,s.contentType=!1;else{if(o.find(":file").length)return;s.data=o.serializeArray()}n(t.extend({},s,r)),e.preventDefault()}function n(e){function s(a,r,n){n||(n={}),n.relatedTarget=e.target;var o=t.Event(a,n);return i.trigger(o,r),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,n.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var a=m(e.url).hash,r=t.type(e.container);if("string"!==r)throw"expected string value for 'container' option; got "+r;var i=e.context=t(e.container);if(!i.length)throw"the container selector '"+e.container+"' did not match anything";e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:e.container}):e.data._pjax=e.container;var u;e.beforeSend=function(t,r){if("GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",e.container),!s("pjax:beforeSend",[t,r]))return!1;r.timeout>0&&(u=setTimeout(function(){s("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0);var n=m(r.url);a&&(n.hash=a),e.requestUrl=v(n)},e.complete=function(t,a){u&&clearTimeout(u),s("pjax:complete",[t,a,e]),s("pjax:end",[t,e])},e.error=function(t,a,r){var n=w("",t,e),i=s("pjax:error",[t,a,r,e]);"GET"==e.type&&"abort"!==a&&i&&o(n.url)},e.success=function(r,u,c){var l=n.state,f="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,p=c.getResponseHeader("X-PJAX-Version"),h=w(r,c,e),v=m(h.url);if(a&&(v.hash=a,h.url=v.href),f&&p&&f!==p)return void o(h.url);if(!h.contents)return void o(h.url);n.state={id:e.id||d(),url:h.url,title:h.title,container:e.container,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(n.state,h.title,h.url);var x=t.contains(i,document.activeElement);if(x)try{document.activeElement.blur()}catch(g){}h.title&&(document.title=h.title),s("pjax:beforeReplace",[h.contents,e],{state:n.state,previousState:l}),i.html(h.contents);var y=i.find("input[autofocus], textarea[autofocus]").last()[0];y&&document.activeElement!==y&&y.focus(),b(h.scripts);var j=e.scrollTo;if(a){var T=decodeURIComponent(a.slice(1)),E=document.getElementById(T)||document.getElementsByName(T)[0];E&&(j=t(E).offset().top)}"number"==typeof j&&t(window).scrollTop(j),s("pjax:success",[r,u,c,e])},n.state||(n.state={id:d(),url:window.location.href,title:document.title,container:e.container,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(n.state,document.title)),p(n.xhr),n.options=e;var c=n.xhr=t.ajax(e);return c.readyState>0&&(e.push&&!e.replace&&(P(n.state.id,[e.container,h(i)]),window.history.pushState(null,"",e.requestUrl)),s("pjax:start",[c,e]),s("pjax:send",[c,e])),n.xhr}function i(e,a){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return n(t.extend(r,g(e,a)))}function o(t){window.history.replaceState(null,"",n.state.url),window.location.replace(t)}function l(e){s||p(n.xhr);var i,a=n.state,r=e.state;if(r&&r.container){if(s&&u==r.url)return;if(a){if(a.id===r.id)return;i=a.id<r.id?"forward":"back"}var c=T[r.id]||[],l=c[0]||r.container,f=t(l),d=c[1];if(f.length){a&&C(i,a.id,[l,h(f)]);var v=t.Event("pjax:popstate",{state:r,direction:i});f.trigger(v);var m={id:r.id,url:r.url,container:l,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1};if(d){f.trigger("pjax:start",[null,m]),n.state=r,r.title&&(document.title=r.title);var x=t.Event("pjax:beforeReplace",{state:r,previousState:a});f.trigger(x,[d,m]),f.html(d),f.trigger("pjax:end",[null,m])}else n(m);f[0].offsetHeight}else o(location.href)}s=!1}function f(e){var a=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",n=t("<form>",{method:"GET"===r?"GET":"POST",action:a,style:"display:none"});"GET"!==r&&"POST"!==r&&n.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,a){var r=a.split("=");n.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if(t.isArray(i))t.each(i,function(e,a){n.append(t("<input>",{type:"hidden",name:a.name,value:a.value}))});else if("object"==typeof i){var o;for(o in i)n.append(t("<input>",{type:"hidden",name:o,value:i[o]}))}t(document.body).append(n),n.submit()}function p(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function d(){return(new Date).getTime()}function h(e){var a=e.clone();return a.find("script").each(function(){this.src||t._data(this,"globalEval",!1)}),a.contents()}function v(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function m(t){var e=document.createElement("a");return e.href=t,e}function x(t){return t.href.replace(/#.*/,"")}function g(e,a){return e&&a?(a=t.extend({},a),a.container=e,a):t.isPlainObject(e)?e:{container:e}}function y(t,e){return t.filter(e).add(t.find(e))}function j(e){return t.parseHTML(e,document,!0)}function w(e,a,r){var n={},i=/<html/i.test(e),o=a.getResponseHeader("X-PJAX-URL");n.url=o?v(m(o)):r.requestUrl;var s,u;if(i){u=t(j(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var c=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i);s=null!=c?t(j(c[0])):u}else s=u=t(j(e));if(0===u.length)return n;if(n.title=y(s,"title").last().text(),r.fragment){var l=u;"body"!==r.fragment&&(l=y(l,r.fragment).first()),l.length&&(n.contents="body"===r.fragment?l:l.contents(),n.title||(n.title=l.attr("title")||l.data("title")))}else i||(n.contents=u);return n.contents&&(n.contents=n.contents.not(function(){return t(this).is("title")}),n.contents.find("title").remove(),n.scripts=y(n.contents,"script[src]").remove(),n.contents=n.contents.not(n.scripts)),n.title&&(n.title=t.trim(n.title)),n}function b(e){if(e){var a=t("script[src]");e.each(function(){var e=this.src,r=a.filter(function(){return this.src===e});if(!r.length){var n=document.createElement("script"),i=t(this).attr("type");i&&(n.type=i),n.src=t(this).attr("src"),document.head.appendChild(n)}})}}function P(t,e){T[t]=e,S.push(t),A(E,0),A(S,n.defaults.maxCacheLength)}function C(t,e,a){var r,i;T[e]=a,"forward"===t?(r=S,i=E):(r=E,i=S),r.push(e),e=i.pop(),e&&delete T[e],A(r,n.defaults.maxCacheLength)}function A(t,e){for(;t.length>e;)delete T[t.shift()]}function D(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function R(){t.fn.pjax=e,t.pjax=n,t.pjax.enable=t.noop,t.pjax.disable=U,t.pjax.click=a,t.pjax.submit=r,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:D},t(window).on("popstate.pjax",l)}function U(){t.fn.pjax=function(){return this},t.pjax=f,t.pjax.enable=R,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",l)}var s=!0,u=window.location.href,c=window.history.state;c&&c.container&&(n.state=c),"state"in window.history&&(s=!1);var T={},E=[],S=[];t.event.props&&t.inArray("state",t.event.props)<0?t.event.props.push("state"):"state"in t.Event.prototype||t.event.addProp("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?R():U()}(jQuery);